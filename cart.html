<!DOCTYPE html>
<html lang="en">
<head>
	<title>Cart</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="Sublime project">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="styles/bootstrap4/bootstrap.min.css">
	<link href="plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="styles/cart.css">
	<link rel="stylesheet" type="text/css" href="styles/cart_responsive.css">
</head>
<body>

<div class="super_container">

	<!-- Header -->

	<header class="header">
		<div class="header_container">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="header_content d-flex flex-row align-items-center justify-content-start">
							<div class="logo"><a href="index.html">GEEKPICK</a></div>
							<nav class="main_nav">
								<ul>
									<li class="has">
										<a href="index.html">Главная</a>
									</li>
									<li class="has">
										<a href="categories.html">Каталог</a>
									</li>>
									<li><a href="contact.html">Контакты</a></li>

									<li><a href="register.html">Аккаунт</a></li>

								</ul>
							</nav>
							<div class="header_extra ml-auto">
								<div class="shopping_cart">
									<a href="cart.html">
										<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
											 viewBox="0 0 489 489" style="enable-background:new 0 0 489 489;" xml:space="preserve">
            <g>
                <path d="M440.1,422.7l-28-315.3c-0.6-7-6.5-12.3-13.4-12.3h-57.6C340.3,42.5,297.3,0,244.5,0s-95.8,42.5-96.6,95.1H90.3
                    c-7,0-12.8,5.3-13.4,12.3l-28,315.3c0,0.4-0.1,0.8-0.1,1.2c0,35.9,32.9,65.1,73.4,65.1h244.6c40.5,0,73.4-29.2,73.4-65.1
                    C440.2,423.5,440.2,423.1,440.1,422.7z M244.5,27c37.9,0,68.8,30.4,69.6,68.1H174.9C175.7,57.4,206.6,27,244.5,27z M366.8,462
                    H122.2c-25.4,0-46-16.8-46.4-37.5l26.8-302.3h45.2v41c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5v-41h139.3v41
                    c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5v-41h45.2l26.9,302.3C412.8,445.2,392.1,462,366.8,462z"/>
            </g>
        </svg>
										<div>Корзина <span id="cart_item_count">(0)</span></div>
									</a>
								</div>

								<div class="search">
									<div class="search_icon">
										<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
											 viewBox="0 0 475.084 475.084" style="enable-background:new 0 0 475.084 475.084;"
											 xml:space="preserve">
										<g>
											<path d="M464.524,412.846l-97.929-97.925c23.6-34.068,35.406-72.047,35.406-113.917c0-27.218-5.284-53.249-15.852-78.087
												c-10.561-24.842-24.838-46.254-42.825-64.241c-17.987-17.987-39.396-32.264-64.233-42.826
												C254.246,5.285,228.217,0.003,200.999,0.003c-27.216,0-53.247,5.282-78.085,15.847C98.072,26.412,76.66,40.689,58.673,58.676
												c-17.989,17.987-32.264,39.403-42.827,64.241C5.282,147.758,0,173.786,0,201.004c0,27.216,5.282,53.238,15.846,78.083
												c10.562,24.838,24.838,46.247,42.827,64.234c17.987,17.993,39.403,32.264,64.241,42.832c24.841,10.563,50.869,15.844,78.085,15.844
												c41.879,0,79.852-11.807,113.922-35.405l97.929,97.641c6.852,7.231,15.406,10.849,25.693,10.849
												c9.897,0,18.467-3.617,25.694-10.849c7.23-7.23,10.848-15.796,10.848-25.693C475.088,428.458,471.567,419.889,464.524,412.846z
												 M291.363,291.358c-25.029,25.033-55.148,37.549-90.364,37.549c-35.21,0-65.329-12.519-90.36-37.549
												c-25.031-25.029-37.546-55.144-37.546-90.36c0-35.21,12.518-65.334,37.546-90.36c25.026-25.032,55.15-37.546,90.36-37.546
												c35.212,0,65.331,12.519,90.364,37.546c25.033,25.026,37.548,55.15,37.548,90.36C328.911,236.214,316.392,266.329,291.363,291.358z
												"/>
										</g>
									</svg>
									</div>
								</div>
								<div class="hamburger"><i class="fa fa-bars" aria-hidden="true"></i></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Search Panel -->
		<div class="search_panel trans_300">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="search_panel_content d-flex flex-row align-items-center justify-content-end">
							<form action="#">
								<input type="text" class="search_input" placeholder="Поиск" required="required">
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>

	<!-- Menu -->

	<div class="menu menu_mm trans_300">
		<div class="menu_container menu_mm">
			<div class="page_menu_content">

				<div class="page_menu_search menu_mm">
					<form action="#">
						<input type="search" required="required" class="page_menu_search_input menu_mm" placeholder="Search for products...">
					</form>
				</div>
				<ul class="page_menu_nav menu_mm">
					<li class="page_menu_item has-children menu_mm">
						<a href="index.html">Главная<i class="fa fa-angle-down"></i></a>
						<ul class="page_menu_selection menu_mm">
							<li class="page_menu_item menu_mm"><a href="categories.html">Каталог<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="cart.html">Корзина<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="register.html">Контакты<i class="fa fa-angle-down"></i></a></li>
						</ul>
					</li>
					<li class="page_menu_item has-children menu_mm">
						<a href="categories.html">Каталог<i class="fa fa-angle-down"></i></a>
					</li>
					<li class="page_menu_item menu_mm"><a href="contact.html">Контакты<i class="fa fa-angle-down"></i></a></li>
				</ul>
			</div>
		</div>

		<div class="menu_close"><i class="fa fa-times" aria-hidden="true"></i></div>
	</div>

	<!-- Home -->

	<div class="home">


	</div>
</div>


<!-- Cart Info -->

<div class="cart_info">
	<div class="container">
		<div class="row">
			<div class="col">
				<!-- Column Titles -->
				<div class="cart_info_columns clearfix">
					<div class="cart_info_col cart_info_col_product">Продукт</div>
					<div class="cart_info_col cart_info_col_price">Цена</div>
					<div class="cart_info_col cart_info_col_quantity">Количество</div>
					<div class="cart_info_col cart_info_col_total">Всего</div>
				</div>
			</div>
		</div>
		<div class="row cart_items_row">
			<div class="col">

				<!-- Cart Item -->
				<div class="cart_item d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
					<!-- Name -->
					<div class="cart_item_product d-flex flex-row align-items-center justify-content-start">
						<div class="cart_item_image">
							<div><!--	 информация 1 сюда нужно прийти при нажати в корзинку и это елемент пример--><img src="images/details_1.jpg" alt=""></div>
						</div>
						<div class="cart_item_name_container">
							<div class="cart_item_name"><a href="#"><!--	 информация 2 сюда нужно прийти при нажати в корзинку и это елемент пример-->Видеокарта Palit NVIDIA GeForce GTX 1050TI PA-GTX1050Ti StormX</a></div>
						</div>
					</div>
					<!-- Price -->
					<div class="cart_item_price"><!--	 ВОТ ЧТОБЫ ЭТО ЦЕНА ИЗМЕНИЛСЯ-->19 090₽</div>
					<!-- Quantity -->
					<div class="cart_item_quantity">
						<div class="product_quantity_container">
							<div class="product_quantity clearfix">
								<span>кол-во</span>
								<input id="quantity_input_${index}" type="text" pattern="[0-9]*" value="${item.quantity}" data-price="${item.price}"><!--вот это value чтобы увеличевался--> value="1">

								<div class="quantity_buttons">
									<div id="quantity_inc_button" class="quantity_inc quantity_control"><i class="fa fa-chevron-up" aria-hidden="true"></i></div>
									<div id="quantity_dec_button" class="quantity_dec quantity_control"><i class="fa fa-chevron-down" aria-hidden="true"></i></div>
								</div>
							</div>
						</div>
					</div>
					<!-- Total -->
					<div class="cart_item_total">19 090₽</div>
				</div>

			</div>
		</div>
		<div class="row row_cart_buttons">
			<div class="col">
				<div class="cart_buttons d-flex flex-lg-row flex-column align-items-start justify-content-start">
					<div class="button continue_shopping_button"><a href="categories.html">Продолжить покупку</a></div>
					<div class="cart_buttons_right ml-lg-auto">
						<div class="button clear_cart_button"><a href="#">Очистить</a></div>
						<div class="button update_cart_button"><a href="#">Обновить корзину</a></div>
					</div>
				</div>
			</div>
		</div>
		<div class="row row_extra">
			<div class="col-lg-4">

				<!-- Delivery -->
				<div class="delivery">
					<div class="section_title">Способдоставки</div>
					<div class="section_subtitle">Выберите способ</div>
					<div class="delivery_options">
						</label>
						<label class="delivery_option clearfix">Доставка на дом
							<input type="radio" name="radio">
							<span class="checkmark"></span>
							<span class="delivery_price">1000₽</span>
						</label>
						<label class="delivery_option clearfix">Самовывоз
							<input type="radio" checked="checked" name="radio">
							<span class="checkmark"></span>
							<span class="delivery_price">бесплатно</span>
						</label>
					</div>
				</div>

				<!-- Coupon Code -->
				<div class="coupon">
					<div class="section_title">Купон</div>
					<div class="section_subtitle">Введите купоны</div>
					<div class="coupon_form_container">
						<form action="#" id="coupon_form" class="coupon_form">
							<input type="text" class="coupon_input" required="required">
							<button class="button coupon_button"><span>принять</span></button>
						</form>
					</div>
				</div>
			</div>

			<div class="col-lg-6 offset-lg-2">
				<div class="cart_total">
					<div class="section_title">В корзине всего</div>
					<div class="cart_total_container">
						<ul>
							<li class="d-flex flex-row align-items-center justify-content-start">
								<div class="cart_total_title">Товаров</div>
								<div class="cart_total_value ml-auto" id="order_total_amount">0₽</div>
							</li>
							<li class="d-flex flex-row align-items-center justify-content-start">
								<div class="cart_total_title">Доставка</div>
								<div class="cart_total_value ml-auto">Бесплатно</div>
							</li>
							<li class="d-flex flex-row align-items-center justify-content-start">
								<div class="cart_total_title">Всего</div>
								<div class="cart_total_value ml-auto" id="order_total_total">19 090₽</div>
							</li>

						</ul>
					</div><div class="button checkout_button">
					<a id="checkoutLink" href="javascript:void(0)">перейти к оплате</a>
				</div>
					<p id="warningMessage" class="warning">Пожалуйста, войдите в аккаунт, чтобы перейти к оплате.</p>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Footer -->

<div class="footer_overlay"></div>
<footer class="footer">
	<div class="footer_background" style="background-image:url(images/footer.jpg)"></div>
	<div class="container">
		<div class="row">
			<div class="col">
				<div class="footer_content d-flex flex-lg-row flex-column align-items-center justify-content-lg-start justify-content-center">
					<div class="footer_logo"><a href="#">GEEKPICK</a></div>
					<div class="copyright ml-auto mr-auto"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						Copyright &copy;<script>document.write(new Date().getFullYear());</script> Все права защищены | Все права принадлежат Чудинову Никите</div>


				</div>
			</div>
		</div>
	</div>
</footer>
</div>

<script src="js/jquery-3.2.1.min.js"></script>
<script src="styles/bootstrap4/popper.js"></script>
<script src="styles/bootstrap4/bootstrap.min.js"></script>
<script src="plugins/greensock/TweenMax.min.js"></script>
<script src="plugins/greensock/TimelineMax.min.js"></script>
<script src="plugins/scrollmagic/ScrollMagic.min.js"></script>
<script src="plugins/greensock/animation.gsap.min.js"></script>
<script src="plugins/greensock/ScrollToPlugin.min.js"></script>
<script src="plugins/easing/easing.js"></script>
<script src="plugins/parallax-js-master/parallax.min.js"></script>
<script src="js/cart.js"></script>
<script>
	document.addEventListener('DOMContentLoaded', function() {
		const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
		const checkoutLink = document.getElementById('checkoutLink');
		const warningMessage = document.getElementById('warningMessage');

		if (isLoggedIn) {
			checkoutLink.href = 'checkout.html';  // Замените на URL страницы оплаты
		} else {
			checkoutLink.addEventListener('click', function() {
				warningMessage.style.display = 'block';
			});
		}
	});


	document.addEventListener("DOMContentLoaded", function () {
		const cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
		const cartItemsContainer = document.querySelector(".cart_items_row .col");

		// Function to update the totals
		function updateTotals() {
			let totalAmount = 0;

			document.querySelectorAll('.product_quantity_input').forEach(input => {
				const quantity = parseInt(input.value);
				const price = parseFloat(input.getAttribute('data-price'));
				if (!isNaN(price) && price > 0) {
					const itemTotal = quantity * price;
					input.closest('.cart_item').querySelector('.cart_item_total').textContent = `${itemTotal.toFixed(2)}₽`;
					totalAmount += itemTotal;
				}
			});

			document.getElementById('order_total_amount').textContent = `${totalAmount.toFixed(2)}₽`;
			document.getElementById('order_total_total').textContent = `${totalAmount.toFixed(2)}₽`;
		}

		// Function to render cart items
		function renderCartItems() {
			cartItemsContainer.innerHTML = cartItems.length === 0 ? "<p>Корзина пуста</p>" : "";

			cartItems.forEach((item, index) => {
				const cartItemHtml = `
                <div class="cart_item d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
                    <div class="cart_item_product d-flex flex-row align-items-center justify-content-start">
                        <div class="cart_item_image">
                            <div><img src="${item.image}" alt=""></div>
                        </div>
                        <div class="cart_item_name_container">
                            <div class="cart_item_name"><a href="#">${item.name}</a></div>
                        </div>
                    </div>
                    <div class="cart_item_price">${item.price}₽</div>
                    <div class="cart_item_quantity">
                        <div class="product_quantity_container">
                            <div class="product_quantity clearfix">
                                <span>кол-во</span>
                                <input id="quantity_input_${index}" class="product_quantity_input" type="text" pattern="[0-9]*" value="${item.quantity}" data-price="${item.price}">
                                <div class="quantity_buttons">
                                    <div id="quantity_inc_button_${index}" class="quantity_inc quantity_control"><i class="fa fa-chevron-up" aria-hidden="true"></i></div>
                                    <div id="quantity_dec_button_${index}" class="quantity_dec quantity_control"><i class="fa fa-chevron-down" aria-hidden="true"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="cart_item_total">${(item.price * item.quantity).toFixed(2)}₽</div>
                </div>
            `;
				cartItemsContainer.innerHTML += cartItemHtml;
			});

			// Update totals
			updateTotals();

			// Add event listeners for quantity change
			document.querySelectorAll('.product_quantity_input').forEach(input => {
				input.addEventListener('change', function () {
					if (this.value < 1) this.value = 1;
					updateTotals();
				});
			});

			document.querySelectorAll('.quantity_inc').forEach(button => {
				button.addEventListener('click', function () {
					const input = this.parentElement.previousElementSibling;
					input.value = parseInt(input.value) + 1;
					updateTotals();
				});
			});

			document.querySelectorAll('.quantity_dec').forEach(button => {
				button.addEventListener('click', function () {
					const input = this.parentElement.previousElementSibling;
					input.value = Math.max(1, parseInt(input.value) - 1);
					updateTotals();
				});
			});
		}

		// Render cart items on load
		renderCartItems();
	});

	
	document.addEventListener("DOMContentLoaded", function () {
		// Извлекаем массив товаров из локального хранилища
		let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

		const cartItemsContainer = document.querySelector(".cart_items_row .col");

		// Очистить контейнер перед добавлением элементов
		cartItemsContainer.innerHTML = "";

		// Проверяем, есть ли товары в корзине
		if (cartItems.length === 0) {
			cartItemsContainer.innerHTML = "<p>Корзина пуста</p>";
		} else {
			// Проходим по всем товарам и добавляем их в контейнер
			cartItems.forEach((item, index) => {
				const cartItemHtml = `
                        <div class="cart_item d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
                            <div class="cart_item_product d-flex flex-row align-items-center justify-content-start">
                                <div class="cart_item_image">
                                    <div><img src="${item.image}" alt=""></div>
                                </div>
                                <div class="cart_item_name_container">
                                    <div class="cart_item_name"><a href="#">${item.name}</a></div>
                                </div>
                            </div>
                            <div class="cart_item_price">${item.price }</div>
                            <div class="cart_item_quantity">
                                <div class="product_quantity_container">
                                    <div class="product_quantity clearfix">
                                        <span>кол-во</span>
                                        <input id="quantity_input_${index}" class="product_quantity_input" type="text" pattern="[0-9]*" value="${item.quantity}" data-price="${item.price}">
                                        <div class="quantity_buttons">
                                            <div id="quantity_inc_button_${index}" class="quantity_inc quantity_control"><i class="fa fa-chevron-up" aria-hidden="true"></i></div>
                                            <div id="quantity_dec_button_${index}" class="quantity_dec quantity_control"><i class="fa fa-chevron-down" aria-hidden="true"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="cart_item_total">${item.price}</div>
                        </div>
                    `;

				cartItemsContainer.innerHTML += cartItemHtml;
			});
		}
	});

	document.addEventListener('DOMContentLoaded', function() {
		const quantityInputs = document.querySelectorAll('.product_quantity_container input[type="text"]');
		const orderTotalAmount = document.getElementById('order_total_amount');

		function updateTotals() {
			let totalAmount = 0;

			quantityInputs.forEach(input => {
				const quantity = parseInt(input.value);
				const price = parseInt(input.dataset.price);
				const itemTotal = quantity * price;

				const cartItem = input.closest('.cart_item');
				const cartItemTotal = cartItem.querySelector('.cart_item_total .cart_item_text');
				cartItemTotal.textContent = `${itemTotal} руб.`;

				totalAmount += itemTotal;
			});

			orderTotalAmount.textContent = `${totalAmount} руб.`;
		}

		quantityInputs.forEach(input => {
			input.addEventListener('change', function() {
				if (this.value < 1) {
					this.value = 1;
				}
				updateTotals();
			});
		});

		updateTotals();
	});

	document.addEventListener('DOMContentLoaded', function() {
		const quantityInputs = document.querySelectorAll('.product_quantity_input');
		const orderTotalAmount = document.getElementById('order_total_amount');

		function updateTotals() {
			let totalAmount = 0;

			quantityInputs.forEach(input => {
				const quantity = parseInt(input.value);
				const price = parseInt(input.getAttribute('data-price'));
				const itemTotal = quantity * price;

				const cartItem = input.closest('.cart_item');
				const cartItemTotal = cartItem.querySelector('.cart_item_total');
				cartItemTotal.textContent = `${itemTotal}₽`;

				totalAmount += itemTotal;
			});

			orderTotalAmount.textContent = `${totalAmount}₽`;
		}

		quantityInputs.forEach(input => {
			input.addEventListener('change', function() {
				if (this.value < 1) {
					this.value = 1;
				}
				updateTotals();
			});
		});

		document.querySelectorAll('.quantity_inc').forEach(button => {
			button.addEventListener('click', function() {
				const input = this.parentElement.previousElementSibling;
				input.value = parseInt(input.value) + 1;
				updateTotals();
			});
		});

		document.querySelectorAll('.quantity_dec').forEach(button => {
			button.addEventListener('click', function() {
				const input = this.parentElement.previousElementSibling;
				input.value = Math.max(1, parseInt(input.value) - 1);
				updateTotals();
			});
		});

		updateTotals();
	});

	document.addEventListener('DOMContentLoaded', function() {
		const quantityInputs = document.querySelectorAll('.product_quantity_input');
		const orderTotalAmount = document.getElementById('order_total_amount');

		function updateTotals() {
			let totalAmount = 0;

			quantityInputs.forEach(input => {
				const quantity = parseInt(input.value);
				const price = parseFloat(input.getAttribute('data-price')); // Извлекаем цену как число с плавающей точкой

				if (!isNaN(price) && price > 0) { // Проверяем, что цена корректна
					const itemTotal = quantity * price;
					const cartItem = input.closest('.cart_item');
					const cartItemTotal = cartItem.querySelector('.cart_item_total');
					cartItemTotal.textContent = `${itemTotal.toFixed(2)}₽`; // Округляем до двух знаков после запятой

					totalAmount += itemTotal;
				}
			});

			orderTotalAmount.textContent = `${totalAmount.toFixed(2)}₽`; // Обновляем общую сумму, округляя до двух знаков после запятой
		}

		quantityInputs.forEach(input => {
			input.addEventListener('change', function() {
				if (this.value < 1) {
					this.value = 1;
				}
				updateTotals();
			});
		});

		document.querySelectorAll('.quantity_inc').forEach(button => {
			button.addEventListener('click', function() {
				const input = this.parentElement.previousElementSibling;
				input.value = parseInt(input.value) + 0;
				updateTotals();
			});
		});

		document.querySelectorAll('.quantity_dec').forEach(button => {
			button.addEventListener('click', function() {
				const input = this.parentElement.previousElementSibling;
				input.value = Math.max(1, parseInt(input.value) - 0);
				updateTotals();
			});
		});
		updateTotals(); // Вызываем функцию обновления итоговой суммы при загрузке страницы
	});

	document.addEventListener('DOMContentLoaded', function() {
		const quantityInputs = document.querySelectorAll('.product_quantity_input');
		const orderTotalAmount = document.getElementById('order_total_amount');
		const cartItemCount = document.getElementById('cart_item_count');

		function updateTotals() {
			let totalAmount = 0;

			quantityInputs.forEach(input => {
				const quantity = parseInt(input.value);
				const price = parseFloat(input.getAttribute('data-price'));

				if (!isNaN(price) && price > 0) {
					const itemTotal = quantity * price;
					const cartItem = input.closest('.cart_item');
					const cartItemTotal = cartItem.querySelector('.cart_item_total');
					cartItemTotal.textContent = `${itemTotal.toFixed(2)}₽`;

					totalAmount += itemTotal;
				}
			});

			orderTotalAmount.textContent = `${totalAmount.toFixed(2)}₽`;
			updateCartItemCount();
		}

		function updateCartItemCount() {
			let itemCount = 0;

			quantityInputs.forEach(input => {
				const quantity = parseInt(input.value);
				if (!isNaN(quantity) && quantity > 0) {
					itemCount += quantity;
				}
			});

			cartItemCount.textContent = `(${itemCount})`;
		}

		function saveToLocalStorage() {
			const cartData = [];

			quantityInputs.forEach(input => {
				const id = input.getAttribute('data-id');
				const quantity = parseInt(input.value);
				const price = parseFloat(input.getAttribute('data-price'));

				if (!isNaN(price) && price > 0 && !isNaN(quantity) && quantity > 0) {
					cartData.push({
						id: id,
						quantity: quantity,
						price: price
					});
				}
			});

			localStorage.setItem('cartData', JSON.stringify(cartData));
		}

		function loadFromLocalStorage() {
			const cartData = JSON.parse(localStorage.getItem('cartData'));

			if (cartData && Array.isArray(cartData)) {
				cartData.forEach(item => {
					const input = document.querySelector(`.product_quantity_input[data-id="${item.id}"]`);
					if (input) {
						input.value = item.quantity;
					}
				});

				updateTotals();
			}
		}

		quantityInputs.forEach(input => {
			input.addEventListener('change', function() {
				if (this.value < 1) {
					this.value = 1;
				}
				updateTotals();
				saveToLocalStorage();
			});
		});

		document.querySelectorAll('.quantity_inc').forEach(button => {
			button.addEventListener('click', function() {
				const input = this.parentElement.previousElementSibling;
				input.value = parseInt(input.value) + 0;
				updateTotals();
				saveToLocalStorage();
			});
		});

		document.querySelectorAll('.quantity_dec').forEach(button => {
			button.addEventListener('click', function() {
				const input = this.parentElement.previousElementSibling;
				input.value = Math.max(1, parseInt(input.value) - 0);
				updateTotals();
				saveToLocalStorage();
			});
		});

		loadFromLocalStorage(); // Load the cart data when the page loads
	});


	document.addEventListener('DOMContentLoaded', function() {
		const clearCartButton = document.querySelector('.clear_cart_button a');
		const cartItemsContainer = document.querySelector('.cart_items_row .col');
		const orderTotalAmount = document.getElementById('order_total_amount');
		const cartItemCount = document.getElementById('cart_item_count');
		const addButton = document.getElementById('add_button');
		const removeButton = document.getElementById('remove_button');
		const itemInput = document.getElementById('item_input');

		// Функция для обновления состояния корзины
		function updateCart() {
			// Очищаем контейнер с товарами
			cartItemsContainer.innerHTML = "<p>Корзина пуста</p>";

			// Обновляем общую сумму заказа и количество товаров
			orderTotalAmount.textContent = `0₽`;
			cartItemCount.textContent = `(0)`;

			// Удаляем данные из localStorage
			localStorage.removeItem('cartItems');
		}

		// Функция для добавления товара в корзину
		function addItemToCart(name, price) {
			const cartItemHtml = `
            <div class="cart_item">
                <div class="cart_item_name">${name}</div>
                <div class="cart_item_price">${price}</div>
            </div>
        `;
			cartItemsContainer.innerHTML += cartItemHtml;

			// Обновляем общую сумму заказа и количество товаров
			updateTotals();

			// Сохраняем данные корзины в localStorage
			saveCartToLocalStorage();
		}

		// Функция для удаления товара из корзины
		function removeItemFromCart() {
			// Удаляем последний добавленный товар из корзины
			const cartItems = cartItemsContainer.querySelectorAll('.cart_item');
			if (cartItems.length > 0) {
				cartItems[cartItems.length - 1].remove();

				// Обновляем общую сумму заказа и количество товаров
				updateTotals();

				// Сохраняем данные корзины в localStorage
				saveCartToLocalStorage();
			}
		}

		// Функция для обновления общей суммы заказа и количества товаров
		function updateTotals() {
			const cartItems = cartItemsContainer.querySelectorAll('.cart_item');
			let totalAmount = 0;
			cartItems.forEach(item => {
				const priceText = item.querySelector('.cart_item_price').textContent;
				const price = parseFloat(priceText);
				totalAmount += price;
			});
			orderTotalAmount.textContent = `${totalAmount.toFixed(2)}₽`;
			cartItemCount.textContent = `(${cartItems.length})`;
		}

		// Функция для сохранения данных корзины в localStorage
		function saveCartToLocalStorage() {
			const cartItems = [];
			const items = cartItemsContainer.querySelectorAll('.cart_item');
			items.forEach(item => {
				const name = item.querySelector('.cart_item_name').textContent;
				const priceText = item.querySelector('.cart_item_price').textContent;
				const price = parseFloat(priceText);
				cartItems.push({ name, price });
			});
			localStorage.setItem('cartItems', JSON.stringify(cartItems));
		}

		// Обработчик события на кнопку "Очистить корзину"
		clearCartButton.addEventListener('click', function(event) {
			event.preventDefault(); // Предотвращаем действие по умолчанию (переход по ссылке)
			updateCart(); // Вызываем функцию для очистки корзины
		});

		// Обработчик события на кнопку "Добавить товар"
		addButton.addEventListener('click', function(event) {
			event.preventDefault(); // Предотвращаем действие по умолчанию (переход по ссылке)
			const itemName = itemInput.value;
			const itemPrice = parseFloat(prompt(`Введите цену для товара "${itemName}":`) || '0');
			addItemToCart(itemName, itemPrice);
			itemInput.value = ''; // Очищаем поле ввода после добавления товара
		});

		// Обработчик события на кнопку "Удалить товар"
		removeButton.addEventListener('click', function(event) {
			event.preventDefault(); // Предотвращаем действие по умолчанию (переход по ссылке)
			removeItemFromCart(); // Вызываем функцию для удаления товара из корзины
		});

		// Проверяем наличие данных в localStorage при загрузке страницы
		const savedCartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
		if (savedCartItems.length > 0) {
			// Если есть данные в localStorage, отображаем их на странице
			savedCartItems.forEach(item => {
				addItemToCart(item.name, item.price);
			});
		}
	});


</script>


</body>
</html>